<!DOCTYPE html><html style="height:100%;background:#00F"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no"/><title>20171011</title><style>*{margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}body{height:100%;overflow:hidden}canvas#stage{width:960px;height:540px;vertical-align:bottom}</style></head><script src="libs.js"></script><body><script>!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.crel=t()}(this,function(){function e(){var a,f=arguments,g=f[0],m=f[1],p=2,y=f.length,b=e[r];if(g=e[s](g)?g:u.createElement(g),1===y)return g;if((!c(m,n)||e[d](m)||l(m))&&(--p,m=null),y-p===1&&c(f[p],"string")&&void 0!==g[o])g[o]=f[p];else for(;y>p;++p)if(a=f[p],null!=a)if(l(a))for(var x=0;x<a.length;++x)h(g,a[x]);else h(g,a);for(var v in m)if(b[v]){var w=b[v];typeof w===t?w(g,m[v]):g[i](w,m[v])}else g[i](v,m[v]);return g}var t="function",n="object",a="nodeType",o="textContent",i="setAttribute",r="attrMap",d="isNode",s="isElement",u=typeof document===n?document:{},c=function(e,t){return typeof e===t},f=typeof Node===t?function(e){return e instanceof Node}:function(e){return e&&c(e,n)&&a in e&&c(e.ownerDocument,n)},g=function(t){return e[d](t)&&1===t[a]},l=function(e){return e instanceof Array},h=function(t,n){e[d](n)||(n=u.createTextNode(n)),t.appendChild(n)};return e[r]={},e[s]=g,e[d]=f,"undefined"!=typeof Proxy&&(e.proxy=new Proxy(e,{get:function(t,n){return!(n in e)&&(e[n]=e.bind(null,n)),e[n]}})),e});var stage=crel("canvas",{id:"stage",width:960,height:540});crel(document.body,stage),stage.style.width=document.body.clientWidth+"px",stage.style.height=document.body.clientHeight+"px";var dst=new Uint8Array(Module.HEAPU8.buffer,Module._malloc(stage.width*stage.height<<2),stage.width*stage.height<<2),buffer=Module._malloc(1024);Module.writeStringToMemory(JSON.stringify({seed:Date.now()}),buffer),Module.cwrap("setup","void",["number"])(buffer);var processimage=Module.cwrap("processimage","void",["number"]);processimage(dst.byteOffset);var imageData=stage.getContext("2d").getImageData(0,0,stage.width,stage.height);imageData.data.set(dst);var ctx=stage.getContext("2d");ctx.putImageData(imageData,0,0),setInterval(function(){stage.style.width=document.body.clientWidth+"px",stage.style.height=document.body.clientHeight+"px",processimage(dst.byteOffset);var e=ctx.getImageData(0,0,stage.width,stage.height);e.data.set(dst),ctx.putImageData(e,0,0)},1e3/30);</script></body></html>